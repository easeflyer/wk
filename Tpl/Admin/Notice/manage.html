<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>公告列表</title>
    <include file="Common:miniheader" />
    <script type="text/javascript">
        function createop(_v, _r) {
            return "<a href='index.php?g=admin&m=Notice&a=edit&id=" + _r.id + "' class='easyui-linkbutton' data-options='iconCls:\"icon-vcard_edit\"'>编辑</a>\n\
            <a href='javascript:void(0)'  onclick='confirmdel(" + _r.id + ")' class='easyui-linkbutton'   data-options='iconCls:\"icon-vcard_edit\"'>删除</a>";
        }
        function renderbutton() {
            $('a.easyui-linkbutton').linkbutton({
                plain: true
            });
        }



        function confirmdel(_id) {
            $.messager.confirm('确认删除', '是否确认删除该公告？', function (r) {
                if (r) {
                    window.location.href = 'index.php?g=admin&m=Notice&a=del&id=' + _id;
                }
            });
        }
    </script>
</head>

<body>
    <div class="easyui-panel" data-options="
             title:'公告列表',
             border:false,
             iconCls:'icon-vcard'
             ">
        <table class="easyui-datagrid" data-options="
                   border:false,
                   fitColumns:true,
                   toolbar:'#toolbar',
                   onLoadSuccess:renderbutton
                   ">
            <thead>
                <th data-options="
                        field:'id',
                        align:'center', 
                        width:20">id</th>
                <th data-options="
                        field:'title',
                        width:100">公告标题</th>
                <th data-options="
                        field:'content',
                        width:100">公告内容</th>
                <th data-options="
                        field:'createtime',
                        width:100">发布日期</th>
                <th data-options="field:'opration',
                        width:150,
                        formatter:createop
                        ">操作</th>
            </thead>
            <tbody>
                <volist name="data" id="val">
                    <tr>
                        <td>{$val['id']}</td>
                        <td>{$val['title']}</td>
                        <td>{$val['content']}</td>
                        <td>{$val[createtime]|date='Y-m-d H:i:s',###}</td>
                    </tr>
                </volist>
            </tbody>
        </table>

        <div id="toolbar">
            <a href="{:U('Notice/add')}" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-vcard_add'">添加公告</a>
        </div>
    </div>
</body>

</html>